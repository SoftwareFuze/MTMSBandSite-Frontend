<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, scalable=yes" />
        <meta name="description" content="The online website for Mount Tabor Middle School's band class!" />
        <link rel="icon" href="logo.png" />
        <title>MTMS Band Site</title>
    </head>
    <body>
        <div id="translator-selector"></div>

        <script>
            function googleTranslateElementInit() {
                new google.translate.TranslateElement({
                    pageLanguage: 'en'
                }, 'translator-selector');
            }
        </script>
        <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
        <script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>

        <div id="root"></div>

        <df-messenger 
            intent="WELCOME" 
            chat-title="MTMSBand-Chat-Bot" 
            chat-icon="logo.png"
            agent-id="1a7b37a3-c193-47ac-b28b-c645fcecb874"
            language-code="en"
        ></df-messenger>

        <script>
            const speech = new SpeechSynthesisUtterance();
            const synthesis = window.speechSynthesis;
            speech.volume = 1;
            speech.pitch = 0;
            speech.rate = .3;
            let keysPressed = [];

            window.addEventListener("keydown", e => {
                keysPressed = [...keysPressed, e.key || e.which];
                let keysPressedWord = "";
                keysPressed.forEach(char => keysPressedWord += char);

                if (keysPressedWord.includes('potato')) {
                    speech.text = 'potatoes';
                    synthesis.speak(speech);
                    keysPressed = [];
                } else if (keysPressedWord.includes('im blue')) {
                    speech.rate = 1;
                    speech.text = "I'm blue ah ba dee a ba da, ah ba dee ah ba da, ah ba dee ba da dah.";
                    synthesis.speak(speech);
                    keysPressed = [];
                }
            });
        </script>
    </body>
</html>